ALTER TABLE `SubRedditMonitor	` DROP FOREIGN KEY FKSubRedditM356459;
ALTER TABLE `SubRedditMonitor	` DROP FOREIGN KEY FKSubRedditM440551;
ALTER TABLE SubRedditMember DROP FOREIGN KEY FKSubRedditM3641;
ALTER TABLE SubRedditMember DROP FOREIGN KEY FKSubRedditM534752;
ALTER TABLE Post DROP FOREIGN KEY FKPost964424;
ALTER TABLE Post DROP FOREIGN KEY FKPost734962;
ALTER TABLE Upvoted DROP FOREIGN KEY FKUpvoted706414;
ALTER TABLE Upvoted DROP FOREIGN KEY FKUpvoted465360;
ALTER TABLE Downvoted DROP FOREIGN KEY FKDownvoted958208;
ALTER TABLE Downvoted DROP FOREIGN KEY FKDownvoted199263;
ALTER TABLE Comment DROP FOREIGN KEY FKComment916862;
ALTER TABLE Comment DROP FOREIGN KEY FKComment675808;
ALTER TABLE Comment DROP FOREIGN KEY FKComment504122;
ALTER TABLE Picture DROP FOREIGN KEY FKPicture58520;
DROP TABLE IF EXISTS Comment;
DROP TABLE IF EXISTS Downvoted;
DROP TABLE IF EXISTS Picture;
DROP TABLE IF EXISTS Post;
DROP TABLE IF EXISTS SubRedditMember;
DROP TABLE IF EXISTS SubRedditMonitor;
DROP TABLE IF EXISTS Topic;
DROP TABLE IF EXISTS Upvoted;
DROP TABLE IF EXISTS `User`;


CREATE TABLE Comment (
  CId            int(10) NOT NULL AUTO_INCREMENT, 
  Content        text NOT NULL, 
  Upvote_Count   int(10) DEFAULT 0 NOT NULL, 
  Downvote_Count int(10) DEFAULT 0 NOT NULL, 
  PostPId        int(10) NOT NULL, 
  UserUId        int(10) NOT NULL, 
  ParentCId      int(10), 
  PRIMARY KEY (CId), 
  UNIQUE INDEX (CId));
CREATE TABLE Downvoted (
  PostPId int(10) NOT NULL, 
  UserUId int(10) NOT NULL, 
  PRIMARY KEY (PostPId, 
  UserUId));
CREATE TABLE Picture (
  PicId   int(10) NOT NULL AUTO_INCREMENT, 
  pLink   varchar(255), 
  PostPId int(10) NOT NULL, 
  PRIMARY KEY (PicId));
CREATE TABLE Post (
  PId            int(10) DEFAULT 0 NOT NULL, 
  Content        text NOT NULL, 
  TopicId        int(10) NOT NULL, 
  UserUId        int(10) NOT NULL, 
  Title          varchar(255) NOT NULL, 
  Upvote_Count   int(10) DEFAULT 0 NOT NULL, 
  Downvote_Count int(10) DEFAULT 0 NOT NULL, 
  PRIMARY KEY (PId), 
  UNIQUE INDEX (PId));
CREATE TABLE SubRedditMember (
  MemberUId int(10) NOT NULL, 
  TopicId   int(10) NOT NULL, 
  PRIMARY KEY (MemberUId, 
  TopicId));
CREATE TABLE SubRedditMonitor (
  MonitorUId int(10) NOT NULL, 
  TopicId    int(10) NOT NULL, 
  PRIMARY KEY (MonitorUId, 
  TopicId));
CREATE TABLE Topic (
  TId         int(10) DEFAULT 0 NOT NULL, 
  Name        varchar(50) NOT NULL UNIQUE, 
  Rules       varchar(255), 
  Description text, 
  PRIMARY KEY (TId), 
  UNIQUE INDEX (TId));
CREATE TABLE Upvoted (
  PostPId int(10) NOT NULL, 
  UserUId int(10) NOT NULL, 
  PRIMARY KEY (PostPId, 
  UserUId));
CREATE TABLE `User` (
  UId           int(10) DEFAULT 0 NOT NULL, 
  Email         varchar(40) NOT NULL UNIQUE, 
  Password_Hash varchar(100) NOT NULL, 
  Username      varchar(50) NOT NULL UNIQUE, 
  Avatar        varchar(255), 
  PRIMARY KEY (UId), 
  UNIQUE INDEX (UId));
ALTER TABLE `SubRedditMonitor	` ADD CONSTRAINT FKSubRedditM356459 FOREIGN KEY (MonitorUId) REFERENCES `User` (UId);
ALTER TABLE `SubRedditMonitor	` ADD CONSTRAINT FKSubRedditM440551 FOREIGN KEY (TopicId) REFERENCES Topic (TId);
ALTER TABLE SubRedditMember ADD CONSTRAINT FKSubRedditM3641 FOREIGN KEY (MemberUId) REFERENCES `User` (UId);
ALTER TABLE SubRedditMember ADD CONSTRAINT FKSubRedditM534752 FOREIGN KEY (TopicId) REFERENCES Topic (TId);
ALTER TABLE Post ADD CONSTRAINT FKPost964424 FOREIGN KEY (TopicId) REFERENCES Topic (TId);
ALTER TABLE Post ADD CONSTRAINT FKPost734962 FOREIGN KEY (UserUId) REFERENCES `User` (UId);
ALTER TABLE Upvoted ADD CONSTRAINT FKUpvoted706414 FOREIGN KEY (PostPId) REFERENCES Post (PId);
ALTER TABLE Upvoted ADD CONSTRAINT FKUpvoted465360 FOREIGN KEY (UserUId) REFERENCES `User` (UId);
ALTER TABLE Downvoted ADD CONSTRAINT FKDownvoted958208 FOREIGN KEY (PostPId) REFERENCES Post (PId);
ALTER TABLE Downvoted ADD CONSTRAINT FKDownvoted199263 FOREIGN KEY (UserUId) REFERENCES `User` (UId);
ALTER TABLE Comment ADD CONSTRAINT FKComment916862 FOREIGN KEY (PostPId) REFERENCES Post (PId);
ALTER TABLE Comment ADD CONSTRAINT FKComment675808 FOREIGN KEY (UserUId) REFERENCES `User` (UId);
ALTER TABLE Comment ADD CONSTRAINT FKComment504122 FOREIGN KEY (ParentCId) REFERENCES Comment (CId);
ALTER TABLE Picture ADD CONSTRAINT FKPicture58520 FOREIGN KEY (PostPId) REFERENCES Post (PId);
